{% import '_macros/macro.html.twig' as macro %}
<div class="col-xs-12 col-sm-6">
    {% if user.fights is null %} <h4 class="text-center">Brak rekordów walk</h4>{% else %}

    <table class="table">
        <tr>
            <th class="text-center">#</th>
            <th class="text-center">Przeciwnik</th>
            <th class="text-center">Formuła</th>
            <th class="text-center">Kat. wagowa</th>
            <th class="text-center">Wynik</th>
            <th class="text-center">Turniej</th>
        </tr>
        {% for fight in user.fights %}
            <tr>
                <td class="text-center">
                    {{ "%02d"|format(loop.index) }}
                    <a href="{{ fight.href }}">
                        Szczegóły {% if fight.youtubeId %}
                            <img class='youtube-icon' src='{{ asset('img/YouTube-icon-full_color.png') }}'>{% endif %}
                    </a>
                </td>

                {% set thisUserFight = '' %}
                {% for userFight in fight.usersFight %}
                    {% if app.request.pathinfo != userFight.user.href %}

                        <td class="text-center">
                            <div> {{ macro.record(userFight.user) }} </div>
                            <a href="{{ userFight.user.href }}">{{ userFight.user.name }} {{ userFight.user.surname }}</a>
                        </td>
                    {% else %}
                    {% set thisUserFight = userFight %}
                    {% endif %}
                {% endfor %}

                <td class="text-center"> {{ fight.formula }}</td>
                <td class="text-center"> {{ fight.weight }}</td>
                <td class="text-center">

                    {% if thisUserFight.isWinner %}
                    <span class="label label-success">W</span>
                    {% elseif thisUserFight.isWinner == false and thisUserFight.isDraw == false %}
                    <span class="label label-danger">L</span>
                    {% endif %}
                    {{ thisUserFight.isDraw ? '<span class="label label-warning">D</span>' }}
                    {{ thisUserFight.isDisqualified ? '<span class="label label-dark">DQ</span>' }}

                </td>
                <td class="text-center">
                    <a href=""> {{ fight.tournament.name }} </a>
                </td>
            </tr>
        {% endfor %}
    </table>
</div>
{% endif %}