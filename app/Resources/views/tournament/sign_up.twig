{% extends 'base.html.twig' %}
{% block body %}
<div class="container">
    <div class="row">
        <div class="col-xs-12">

    {% if is_granted('ROLE_USER') %}
        <p>Twoja data urodzenia to: {{ app.user.birthDay | date('Y-m-d')}}.
            W dniu turnieju {{ tournament.start | date('Y-m-d') }} będziesz miał {{ date_diff }} lat.
            Więc twoja kategoria wiekowa to - <b>{{ age }}</b></p>
        <p>Twoja płeć to <b>{{ app.user.male ?  'mężczyzna' : 'kobieta' }}</b> </p><br>
    {% endif %}

    {% if signUpTournament| length >= tournament.capacity %}
        <p><strong>Limit miejsc został wyczerpany</strong></p>
    {% endif %}

    {% if not is_granted('ROLE_USER') %}
        <p>Aby wysłać / skasować swoje zgłoszenie na turniej musisz być zalogowany! &#8594; <a href="{{ path ('login') }}">Przejdź do strony logowania</a></p>
    {% endif %}
    {% if is_granted('ROLE_USER') and isUserRegister  %}
        <p>Twoje zgłoszenie na turniej zostało zarejestrowane:</p>
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th>Nazwisko i Imię</th>
                <th>Klasa</th>
                <th>Staż Treningowy</th>
                <th>Płeć</th>
                <th>Kategoria Wagowa</th>
                <th>Wiek</th>
                <th>Klub</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td><a href="{{ path('user', {'id': isUserRegister.User.id }) }}"> {{ isUserRegister.User.surname }} {{ isUserRegister.User.name }}</a></td>
                <td> {{ isUserRegister.formula }} </td>
                <td> {{ isUserRegister.trainingTime }} </td>
                <td> {{ isUserRegister.User.male ?  'M' : 'K' }} </td>
                <td> {{ isUserRegister.weight }} </td>
                <td> {{ isUserRegister.User.birthDay |getAge }} </td>
                <td> {{ isUserRegister.User.club }} </td>
            </tr>
            </tbody>
        </table>
        {{ form_start(formDelete) }}
        <button type="submit" class="btn btn-danger" formnovalidate >Skasuj moje zgłoszenie </button>
        {{ form_end(formDelete)  }}
    {% endif %}

    {% if is_granted('ROLE_USER') and not isUserRegister  %}
        <p>Wybierz klasę oraz kategorię wagową w której chcesz walczyć:</p>
        Klasy zawodników wg. stopnia zaawansowania:<br>
        <ul>
            <li>A – zawodnicy z występami na zawodach rangi Mistrzostw Polski lub aspirujący do nich. Conajmniej kilkanaście występów amatorskich. Prezentujący wysokie wyszkolenie techniczne i motoryczne. W klasie tej na odpowiedzialność trenera wystąpić może zawodnik z klasy B.</li>
            <li>B – zawodnicy średniej klasy. 3 lub więcej pojedynków amatorskich bez występów na zawodach ogólnopolskich. W klasie tej na odpowiedzialność trenera wystąpić może zawodnik z klasy C.</li>
            <li>C – osoby początkujące i trenujące rekreacyjnie. Góra kilka walk amatorskich. Dodatkowo uwzględniamy w zgłoszeniu staż treningowy.</li>
        </ul>
        <div class="col-md-6">
            {{ form_start(form) }}
            {{ form_row(form.formula,{ 'label' : 'Klasa', 'placeholder' : 'Wybierz klasę'} ) }}
            {{ form_row(form.weight, { 'label': 'Kategoria wagowa', 'placeholder':'Wybierz kategorie wagową' }) }}
            {{ form_row(form.trainingTime, {
                'label': 'Staż treningowy (opcjonalnie) - liczba miesięcy - widoczna tylko dla Organizatora',
                'attr': {'min': 0, 'max' : 99}}) }}
            <button type="submit" class="btn btn-primary" formnovalidate >Wyślij moje zgłoszenie </button>
            {{ form_end(form)  }}
        </div>
    {% endif %}

    {{ include('tournament/_listaZapisanych.html.twig') }}
        </div>
    </div>
</div>
{% endblock %}

